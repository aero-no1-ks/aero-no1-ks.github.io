(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["attraction"],{"1ccb":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],ref:"echartsInstance",staticStyle:{width:"100%",height:"100%"}})},a=[],i=r("2f62"),o={props:["isArrival","center","items","map","large","slider","xycor"],data:()=>({chart:null,series:null,option:null,effect:{show:!0,trailLength:0,symbol:"box",symbolSize:3.5,constantSpeed:13}}),computed:{...Object(i["c"])(["airport","color","areaColor","effectLines","effectTrail"])},methods:{drawChart2d(t=!1,e=!1,r="usa"){this.series&&!t||(this.series=[{type:"bar",data:_.map(this.items,(t,e)=>({name:t.ap,value:t.tau})),itemStyle:{normal:{barBorderRadius:[5,0,0,5],color:this.$vuetify.theme.primary}}},{name:this.center.ap,type:"effectScatter",zLevel:10,coordinateSystem:"geo",rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}",distance:10}},symbolSize:10,tooltip:{formatter:`{b} - ${this.center.tau.toLocaleString()}`},data:[{name:this.center.ap,value:[...this.getCoords(this.center.ap),100]}]},..._.map(this.items,(t,e)=>({name:t.ap,type:"scatter",coordinateSystem:"geo",label:{normal:{show:!0,position:"right",formatter:"{b}",distance:10}},symbolSize:6,tooltip:{formatter:`{b} - ${t.tau.toLocaleString()} (${t.ratio}%)`},data:[{name:t.ap,value:[...this.getCoords(t.ap),_.min([_.max([20,t.ratio]),80])]}]})),..._.map(this.items,(t,e)=>({name:t.ap,type:"lines",symbol:["none","none"],symbolSize:10,effect:{...this.effect},zlevel:3,large:!0,tooltip:{formatter:`{a}{b}{c} - ${t.tau.toLocaleString()} (${t.ratio}%)`},lineStyle:{color:this.$vuetify.theme.primary,width:2.5,curveness:0,opacity:.9},data:[{fromName:this.center.ap,toName:t.ap,coords:[this.getCoords(this.center.ap),this.getRatioCoords(this.center.ap,t.ap,.3)]}]})),..._.map(this.items,(t,e)=>({name:t.ap,type:"lines",symbol:["none","none"],symbolSize:10,effect:{...this.effect},zlevel:2,large:!0,silent:!0,lineStyle:{color:"rgb(255, 237, 0)",width:1.5,curveness:0,opacity:.4,type:"dotted"},data:this.isArrival?[{fromName:t.ap,toName:this.center.ap,coords:[this.getCoords(t.ap),this.getCoords(this.center.ap)]}]:[{fromName:this.center.ap,toName:t.ap,coords:[this.getCoords(this.center.ap),this.getCoords(t.ap)]}]}))]),this.option&&!t||(this.option={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:14,fontWeight:"bold"},title:{text:`${this.center.ap} (total: ${this.center.tau.toLocaleString()})`,bottom:5,left:5,fontSize:12,textStyle:{color:"#FFFFFF"}},tooltip:{trigger:"item"},grid:{right:40,top:10,bottom:10,width:"15%",containLable:!0},geo:{map:r,label:{emphasis:{show:!1}},silent:!0,center:this.xycor,roam:!0,zoom:1.4,itemStyle:{normal:{areaColor:this.areaColor,borderColor:"#989898"},emphasis:{areaColor:this.$vuetify.theme.primary}}},yAxis:{type:"category",data:_.map(this.items,"ap"),position:"right",inverse:!0,axisLabel:{textStyle:{color:"#FFFFFF"}}},xAxis:{type:"value",inverse:!0,axisLabel:{show:!1},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},series:this.series}),this.chart.setOption(this.option,e),this.chart.resize()},getCoords(t){const e=_.find(this.airport,e=>e.code===t);return[e.lon,e.lat]},convertData(t,e){const r=e||this.center.ap,s=this.getCoords(r),a=this.getCoords(t);return[{fromName:r,toName:t,coords:[s,a]}]},getRatioCoords(t,e,r=.3){const s=this.getCoords(t),a=this.getCoords(e);return[(1-r)*s[0]+r*a[0],(1-r)*s[1]+r*a[1]]},onResize(){this.chart&&debounce(this.chart.resize,200)()}},watch:{xycor(t){this.drawChart2d(!0,!0)},large(t){this.onResize()},map(t){this.drawChart2d(!1,!1,t?"world":"usa")}},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsInstance,"chalk",{renderer:"canvas"}),this.drawChart2d(!1,!0)},1)}},n=o,l=r("2877"),c=Object(l["a"])(n,s,a,!1,null,null,null);e["a"]=c.exports},f2e5:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{staticClass:"pa-1",attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[r("v-menu",{attrs:{"offset-y":""}},[r("v-btn",{staticClass:"mx-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("\n        Enlarge\n      ")]),r("v-list",t._l(["Shrink"].concat(t.desArrFull),function(e,s){return r("v-list-tile",{key:s,on:{click:function(e){t.large=s-1}}},[r("v-list-tile-title",[t._v(t._s(e))])],1)}),1)],1),r("v-menu",{attrs:{"offset-y":""}},[r("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("\n        Top "+t._s(t.slider)+" travels\n      ")]),r("v-list",t._l(t.cut,function(e){return r("v-list-tile",{key:e,on:{click:function(r){t.slider=e}}},[r("v-list-tile-title",[t._v(t._s(e))])],1)}),1)],1)],1),r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[t._l(t.items,function(e,s){return[r("v-flex",{key:s,staticClass:"pa-1",style:t.setShow(s),attrs:{xs6:!t.isLarge(s),xs12:t.isLarge(s)}},[r("v-card",{attrs:{dark:""}},[r("AppMapPane",{style:t.largeStyle(s),attrs:{isArrival:1,center:t.getCenter(t.center[s]),items:e,map:t.map,large:t.large,slider:t.slider,xycor:t.xycor}})],1)],1)]})],2)],1)],1)},a=[],i=r("2f62"),o=r("1ccb"),n={data:()=>({index:1,cut:10,map:!1,isRelative:!1,large:-1,slider:10,tooltipItems:[{title:"Total",icon:"looks_3",description:"total rankings"},{title:"From origin",icon:"looks_one",description:"direct flight"},{title:"From hub",icon:"looks_two",description:"from hub (indirect flight)"}]}),computed:{...Object(i["c"])(["desArr","dataDes","airport"]),...Object(i["b"])(["desArrFull"]),center(){return _.map(this.desArr,t=>_.find(this.dataDes,e=>t===e.ap))},prop(){return["total","stopx","stopy"][this.index]},items(){return _.map(this.center,(t,e)=>_.map(_.slice(t[this.prop],0,this.slider),t=>({ap:t.ap,tau:t.tau,ratio:_.round(t.tau/this.center[e].tau*100,2)})))},aps(){return _.uniq([...this.desArr,..._.map(_.flattenDeep(this.items),"ap")])},xycor(){const t=_.map(this.aps,this.getCoords),e=_.size(t);return[_.sumBy(t,"lon")/e,_.sumBy(t,"lat")/e]}},methods:{isLarge(t){return this.large===t},largeStyle(t){return{height:this.isLarge(t)?"calc(100vh - 66px - 56px - 6px)":"calc(50vh - 66px - 2px)"}},setShow(t){return{display:-1===this.large||this.isLarge(t)?"":"none"}},getCenter(t){return{ap:t.ap,tau:t.tau}},getCoords(t){const e=_.find(this.airport,e=>e.code===t);return{lon:e.lon,lat:e.lat}}},components:{AppMapPane:o["a"]}},l=n,c=r("2877"),p=Object(c["a"])(l,s,a,!1,null,null,null);e["default"]=p.exports}}]);