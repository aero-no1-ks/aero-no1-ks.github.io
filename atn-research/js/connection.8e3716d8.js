(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["connection"],{"30ad":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{staticClass:"pa-1",attrs:{id:"connection",row:"",wrap:""}},[i("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[i("v-btn-toggle",{staticClass:"ma-0 pa-0",attrs:{mandatory:""},model:{value:t.bounding,callback:function(e){t.bounding=e},expression:"bounding"}},t._l(t.boundingItems,function(e,a){return i("v-tooltip",{key:a,attrs:{bottom:"",color:"primary"}},[i("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[i("v-icon",[t._v(t._s(e.icon))])],1),i("span",[t._v(t._s(e.title))])],1)})),i("v-menu",{attrs:{"offset-y":""}},[i("v-btn",{staticClass:"mx-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("\n        Enlarge\n      ")]),i("v-list",t._l(["Shrink"].concat(t.hubFull),function(e,a){return i("v-list-tile",{key:a,on:{click:function(e){t.large=a-1}}},[i("v-list-tile-title",[t._v(t._s(e))])],1)}))],1),i("v-menu",{attrs:{"offset-y":""}},[i("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("\n        Top "+t._s(t.slider)+" segments\n      ")]),i("v-list",t._l(t.cut,function(e){return i("v-list-tile",{key:e,on:{click:function(i){t.slider=e}}},[i("v-list-tile-title",[t._v(t._s(e))])],1)}))],1)],1),i("v-flex",{attrs:{xs8:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[t._l(t.items,function(e,a){return[i("v-flex",{key:a,staticClass:"pa-1",style:t.setShow(a),attrs:{xs6:!t.isLarge(a),xs12:t.isLarge(a)}},[i("v-card",{attrs:{dark:""}},[i("app-map-pane-connection",{style:t.largeStyle(a),attrs:{isArrival:t.bounding,ap:{ap:t.hub[a],tau:t.getTau(t.hub[a])},item:e[t.bounding],map:t.map,large:t.large,slider:t.slider}})],1)],1)]})],2)],1),i("v-flex",{staticClass:"pa-1",attrs:{xs4:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticStyle:{position:"relative",height:"calc(50vh - 66px - 2px)"}},[i("app-map-pane-connection-scatter",{attrs:{isArrival:t.bounding,items:t.items,isNormalized:t.isNormalized}}),i("div",{staticStyle:{position:"absolute",left:"100px",top:"0px","font-size":"10px"}},[i("v-switch",{staticClass:"ma-0 pa-0",attrs:{label:"normalize"},model:{value:t.isNormalized,callback:function(e){t.isNormalized=e},expression:"isNormalized"}})],1)],1)],1)],1),i("v-layout",{staticClass:"py-1",attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"py-1",attrs:{xs12:""}},[i("v-card",{staticStyle:{height:"calc(25vh - 33px - 5px)"}},[i("app-map-pane-connection-distribution",{attrs:{isArrival:t.bounding,items:t.items,slider:t.slider}})],1)],1)],1)],1)],1)},r=[],o=i("2f62"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"echartsMapPaneConnection",staticStyle:{width:"100%",height:"100%"}})},n=[],l={props:["isArrival","ap","item","map","large","slider"],data:()=>({chart:""}),computed:{...Object(o["c"])(["airport","color","areaColor"]),items(){return _.slice(this.item,0,this.slider)},center(){return this.ap.ap}},methods:{drawChart2d(t="usa"){const e="path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z",i=[{name:this.center,type:"effectScatter",coordinateSystem:"geo",rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}",distance:10}},symbolSize(t){return t[2]/4},itemStyle:{normal:{color:this.$vuetify.theme.primary}},tooltip:{formatter:`{b} - ${this.ap.tau}`},data:[{name:this.center,value:[...this.getCoords(this.center),100]}]},..._.map(this.items,(t,e)=>({name:t.ap,type:"effectScatter",coordinateSystem:"geo",rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}",distance:10}},symbolSize(t){return t[2]/4},itemStyle:{normal:{color:this.color[e]}},tooltip:{formatter:`{b} - ${t.tau} (${t.ratio}%)`},data:[{name:t.ap,value:[...this.getCoords(t.ap),_.min([_.max([20,t.ratio]),80])]}]})),..._.map(this.items,(t,i)=>({name:t.ap,type:"lines",symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:e,symbolSize:15},tooltip:{formatter:`{a}{b}{c} - ${t.tau} (${t.ratio}%)`},lineStyle:{color:this.color[i],width:1+t.ratio,curveness:0,opacity:.5},data:this.isArrival?this.convertData(this.center,t.ap):this.convertData(t.ap,this.center)}))],a={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:14,fontWeight:"bold"},title:{text:`${this.center} (total: ${this.ap.tau})`,bottom:5,left:5,fontSize:12,textStyle:{color:"#FFFFFF"}},tooltip:{trigger:"item"},geo:{map:t,label:{emphasis:{show:!1}},center:this.getCoords(this.center),roam:!0,zoom:2,itemStyle:{normal:{areaColor:this.areaColor,borderColor:"#5D5D5D"},emphasis:{areaColor:this.$vuetify.theme.primary}}},series:i};this.chart.setOption(a,!0)},getCoords(t){const e=_.find(this.airport,e=>e.code===t);return[e.lon,e.lat]},convertData(t,e){const i=e||this.center,a=this.getCoords(i),r=this.getCoords(t);return[{fromName:i,toName:t,coords:[a,r]}]},onOpen(t){window.open(t)}},watch:{items(t){this.drawChart2d()},large(t){_.delay(this.chart.resize,200)},map(t){this.drawChart2d(t?"world":"usa")}},created(){},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsMapPaneConnection),this.drawChart2d(),window.addEventListener("resize",debounce(this.chart.resize,200))},1)},beforeDestroy(){window.removeEventListener("resize",debounce(this.chart.resize,200))}},c=l,h=i("2877"),p=Object(h["a"])(c,s,n,!1,null,null,null);p.options.__file="MapPaneConnection.vue";var u=p.exports,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"echartsMapPaneConnectionScatter",staticStyle:{width:"100%",height:"100%"}})},m=[],f={props:["isArrival","items","isNormalized"],data:()=>({chart:""}),computed:{...Object(o["c"])(["airport","color","hub"]),index(){return this.isArrival?0:1},item(){return _.map(this.items,t=>t[this.index])},itemFiltered(){return this.isNormalized?_.map(this.item,t=>{const[e,i]=[_.maxBy(t,"tau").tau,_.minBy(t,"tau").tau],a=e-i;return _.map(t,t=>({ap:t.ap,tau:_.round((t.tau-i)/a*100,2)}))}):this.item}},methods:{drawChart(){const t=_.map(this.itemFiltered,(t,e)=>({name:this.hub[e],type:"scatter",itemStyle:{color:this.color[e],borderWidth:1,borderColor:"#fff"},data:_.map(t,t=>({name:`${this.hub[e]}->${t.ap}`,value:[this.distance(this.hub[e],t.ap),t.tau],symbolSize:12}))})),e=this,i={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:11,fontWeight:"bold",color:"#FFFFFF"},xAxis:[{name:"Distance (mile)",nameLocation:"center",type:"value",scale:!0,nameGap:25,splitLine:{show:!1},axisLine:{lineStyle:{color:"#FFFFFF"}}}],yAxis:[{name:this.isNormalized?"Volume (%)":"Volume (*1000)",nameGap:10,type:"value",scale:!0,splitLine:{show:!1},axisLabel:{formatter(t){return e.isNormalized?t:_.round(t/1e3)}},axisLine:{lineStyle:{color:"#FFFFFF"}}}],grid:[{top:30,left:45,right:20,bottom:45}],tooltip:{trigger:"item",axisPointer:{type:"cross",label:{color:"#000000"}}},legend:{orient:"vertical",top:0,right:5,data:this.hub,itemGap:3,itemWidth:15,textStyle:{color:"#FFFFFF",selectedMode:"single",fontSize:12}},series:t};this.chart.setOption(i,!0)},onOpen(t){window.open(t)},distance(t,e){if(t===e)return null;const i=_.find(this.airport,e=>e.code===t),a=_.find(this.airport,t=>t.code===e);return _.round(3958.76*g(b(i.lat)*b(a.lat)+y(i.lat)*y(a.lat)*y(i.lon-a.lon)),2)}},watch:{itemFiltered(t){this.drawChart()},large(t){_.delay(this.chart.resize,200)}},created(){},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsMapPaneConnectionScatter),this.drawChart(),window.addEventListener("resize",debounce(this.chart.resize,200))},1)},beforeDestroy(){window.removeEventListener("resize",debounce(this.chart.resize,200))}};function v(t){return t*Math.PI/180}function b(t){return Math.sin(v(t))}function y(t){return Math.cos(v(t))}function g(t){return Math.acos(t)}var x=f,w=Object(h["a"])(x,d,m,!1,null,null,null);w.options.__file="MapPaneConnectionScatter.vue";var F=w.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"echartsPaneConnectionDistribution",staticStyle:{width:"100%",height:"100%"}})},z=[],C={props:["isArrival","items","slider"],data:()=>({chart:""}),computed:{...Object(o["c"])(["airport","color","hub"]),...Object(o["b"])(["hubFull"]),index(){return this.isArrival?0:1},item(){return _.map(this.items,t=>t[this.index])}},methods:{drawChart(){const t=_.map(this.item,(t,e)=>({name:this.hub[e],type:"line",symbolSize:8,lineStyle:{color:this.color[e],width:3,opacity:.6},data:_.map(t,(t,i)=>({name:this.isArrival?`${this.hub[e]}<-${t.ap}`:`${this.hub[e]}->${t.ap}`,value:t.tau}))})),e=this,i={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:11,fontWeight:"bold",color:"#FFFFFF"},xAxis:[{type:"category",scale:!0,splitLine:{show:!1},axisLine:{lineStyle:{color:"#FFFFFF"}},data:_.map(this.item[0],(t,e)=>e+1)}],yAxis:[{name:"Volume (*1000)",nameGap:10,type:"value",scale:!0,splitLine:{show:!1},axisLabel:{formatter(t){return _.round(t/1e3)}},axisLine:{lineStyle:{color:"#FFFFFF"}}}],grid:[{top:25,left:45,right:20,bottom:25}],tooltip:{trigger:"axis",formatter(t){let i=`Rank ${t[0].dataIndex+1}<br>`;return _.each(t,(t,a)=>{const r=t.marker.replace(t.color,e.color[a]);i+=`${r} ${t.name}: ${t.value}<br>`}),i.slice(0,-4)},axisPointer:{type:"shadow",label:{color:"#000000"}}},legend:{orient:"horizontal",width:250,top:0,right:5,data:this.hub,itemGap:3,itemWidth:15,textStyle:{color:"#FFFFFF",selectedMode:"single",fontSize:12}},series:t};this.chart.setOption(i,!0)},onOpen(t){window.open(t)},distance(t,e){if(t===e)return null;const i=_.find(this.airport,e=>e.code===t),a=_.find(this.airport,t=>t.code===e);return _.round(3958.76*M(L(i.lat)*L(a.lat)+k(i.lat)*k(a.lat)*k(i.lon-a.lon)),2)}},watch:{item(t){this.drawChart()}},created(){},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsPaneConnectionDistribution),this.drawChart(),window.addEventListener("resize",debounce(this.chart.resize,200))},1)},beforeDestroy(){window.removeEventListener("resize",debounce(this.chart.resize,200))}};function $(t){return t*Math.PI/180}function L(t){return Math.sin($(t))}function k(t){return Math.cos($(t))}function M(t){return Math.acos(t)}var O=C,A=Object(h["a"])(O,S,z,!1,null,null,null);A.options.__file="MapPaneConnectionDistribution.vue";var P=A.exports,D={data:()=>({bounding:0,flight:["Departure","Arrival"],apIx:0,cut:10,map:!1,isNormalized:!1,large:-1,slider:10,boundingItems:[{title:"Departure",icon:"flight_takeoff"},{title:"Arrival",icon:"flight_land"}]}),computed:{...Object(o["c"])(["hub"]),...Object(o["b"])(["hubFull"]),items(){const t=_.orderBy(_.filter(dataSetHub,t=>_.includes(this.hub,t.ap)&&_.size(t.bndOt)&&_.size(t.bndIn)),["tau"],["desc"]);return _.map(t,t=>[_.slice(_.map(t.bndOt,e=>({ap:e.ap,tau:10*e.tau,ratio:_.round(e.tau/t.tau*100,2)})),0,this.slider),_.slice(_.map(t.bndIn,e=>({ap:e.ap,tau:10*e.tau,ratio:_.round(e.tau/t.tau*100,2)})),0,this.slider)])}},methods:{isLarge(t){return this.large===t},getTau(t){return 10*_.find(dataSetHub,e=>e.ap===t).tau},largeStyle(t){return{height:this.isLarge(t)?"calc(100vh - 66px - 56px - 6px)":"calc(50vh - 66px - 2px)"}},getHeaders(t){return[{text:t,value:"ap",sortable:!1,align:"center"},{text:"Volume",value:"tau",sortable:!1,align:"center"},{text:"Ratio",value:"ratio",sortable:!1,align:"center"}]},setShow(t){return{display:-1===this.large||this.isLarge(t)?"":"none"}}},watch:{},created(){},mounted(){},components:{"app-map-pane-connection":u,"app-map-pane-connection-scatter":F,"app-map-pane-connection-distribution":P}},E=D,N=(i("9e94"),Object(h["a"])(E,a,r,!1,null,null,null));N.options.__file="_Connection.vue";e["default"]=N.exports},"9d86":function(t,e,i){},"9e94":function(t,e,i){"use strict";var a=i("9d86"),r=i.n(a);r.a}}]);