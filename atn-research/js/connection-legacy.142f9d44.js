(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["connection"],{"1ccb":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"echartsMapPaneConnection",staticStyle:{width:"100%",height:"100%"}})},r=[],s=i("2f62"),o={props:["isArrival","center","items","map","large","slider"],data:()=>({chart:null,series:null,option:null}),computed:{...Object(s["c"])(["airport","color","areaColor","effectLines"])},methods:{drawChart2d(t=!1,e=!1,i="usa"){this.series&&!t||(this.series=[{name:this.center.ap,type:"effectScatter",effectType:"glare",coordinateSystem:"geo",rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}",distance:10}},symbolSize:8,tooltip:{formatter:`{b} - ${this.center.tau}`},data:[{name:this.center.ap,value:[...this.getCoords(this.center.ap),100]}]},..._.map(this.items,(t,e)=>({name:t.ap,type:"effectScatter",coordinateSystem:"geo",rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}",distance:10}},symbolSize:5,tooltip:{formatter:`{b} - ${t.tau} (${t.ratio}%)`},data:[{name:t.ap,value:[...this.getCoords(t.ap),_.min([_.max([20,t.ratio]),80])]}]})),..._.map(this.items,(t,e)=>({name:t.ap,type:"lines",zlevel:3,symbol:["none","arrow"],symbolSize:6,effect:{...this.effectLines,constantSpeed:15},large:!0,largeThreshold:50,tooltip:{formatter:`{a}{b}{c} - ${t.tau} (${t.ratio}%)`},lineStyle:{width:1.5,curveness:0,opacity:.7},data:this.isArrival?this.convertData(this.center.ap,t.ap):this.convertData(t.ap,this.center.ap)}))]),this.option&&!t||(this.option={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:14,fontWeight:"bold"},title:{text:`${this.center.ap} (total: ${this.center.tau})`,bottom:5,left:5,fontSize:12,textStyle:{color:"#FFFFFF"}},tooltip:{trigger:"item"},geo:{map:i,label:{emphasis:{show:!1}},center:this.getCoords(this.center.ap),roam:!0,zoom:1.6,itemStyle:{normal:{areaColor:this.areaColor,borderColor:"#989898"},emphasis:{areaColor:this.$vuetify.theme.primary}}},series:this.series}),this.chart.setOption(this.option,e)},getCoords(t){const e=_.find(this.airport,e=>e.code===t);return[e.lon,e.lat]},convertData(t,e){const i=e||this.center.ap,a=this.getCoords(i),r=this.getCoords(t);return[{fromName:i,toName:t,coords:[a,r]}]}},watch:{items(t){this.drawChart2d(!0,!0)},large(t){_.delay(this.chart.resize,200)},map(t){this.drawChart2d(!1,!1,t?"world":"usa")}},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsMapPaneConnection,"chalk"),this.drawChart2d(!1,!0),window.addEventListener("resize",debounce(this.chart.resize,200))},1)},beforeDestroy(){window.removeEventListener("resize",debounce(this.chart.resize,200))}},n=o,l=i("2877"),c=Object(l["a"])(n,a,r,!1,null,null,null);c.options.__file="MapPane.vue";e["a"]=c.exports},"30ad":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{staticClass:"pa-1",attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"px-1",attrs:{xs12:""}},[i("v-btn-toggle",{staticClass:"ma-0 pa-0",attrs:{mandatory:""},model:{value:t.isArrival,callback:function(e){t.isArrival=e},expression:"isArrival"}},t._l(t.tooltipItems,function(e,a){return i("v-tooltip",{key:a,attrs:{bottom:"",color:"primary"}},[i("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[i("v-icon",[t._v(t._s(e.icon))])],1),i("span",[t._v(t._s(e.title))])],1)})),i("v-menu",{attrs:{"offset-y":""}},[i("v-btn",{staticClass:"mx-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("\n        Enlarge\n      ")]),i("v-list",t._l(["Shrink"].concat(t.hubArrFull),function(e,a){return i("v-list-tile",{key:a,on:{click:function(e){t.large=a-1}}},[i("v-list-tile-title",[t._v(t._s(e))])],1)}))],1),i("v-menu",{attrs:{"offset-y":""}},[i("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("\n        Top "+t._s(t.slider)+" segments\n      ")]),i("v-list",t._l(t.cut,function(e){return i("v-list-tile",{key:e,on:{click:function(i){t.slider=e}}},[i("v-list-tile-title",[t._v(t._s(e))])],1)}))],1)],1),i("v-flex",{attrs:{xs8:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[t._l(t.items,function(e,a){return[i("v-flex",{key:a,staticClass:"pa-1",style:t.setShow(a),attrs:{xs6:!t.isLarge(a),xs12:t.isLarge(a)}},[i("v-card",{attrs:{dark:""}},[i("app-map-pane",{style:t.largeStyle(a),attrs:{isArrival:t.isArrival,center:t.getCenter(t.aps[a]),items:e,map:t.map,large:t.large,slider:t.slider}})],1)],1)]})],2)],1),i("v-flex",{staticClass:"pa-1",attrs:{xs4:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticStyle:{position:"relative",height:"calc(50vh - 66px - 2px)"}},[i("app-map-pane-connection-scatter",{attrs:{isArrival:t.isArrival,items:t.items,isRelative:t.isRelative}}),i("div",{staticStyle:{position:"absolute",left:"100px",top:"0px","font-size":"10px"}},[i("v-switch",{staticClass:"ma-0 pa-0",attrs:{color:"primary",label:"Relative"},model:{value:t.isRelative,callback:function(e){t.isRelative=e},expression:"isRelative"}})],1)],1)],1)],1),i("v-layout",{staticClass:"py-1",attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"py-1",attrs:{xs12:""}},[i("v-card",{staticStyle:{height:"calc(25vh - 33px - 5px)"}},[i("app-map-pane-connection-distribution",{attrs:{isArrival:t.isArrival,items:t.items}})],1)],1)],1)],1)],1)},r=[],s=i("2f62"),o=i("1ccb"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"echartsMapPaneConnectionScatter",staticStyle:{width:"100%",height:"100%"}})},l=[],c={props:["isArrival","items","isRelative"],data:()=>({chart:null,series:null,option:null}),computed:{...Object(s["c"])(["airport","color","hubArr"]),itemsRelative(){return _.map(this.items,t=>{const[e,i]=[_.maxBy(t,"tau").tau,_.minBy(t,"tau").tau],a=e-i;return _.map(t,t=>({ap:t.ap,tau:_.round((t.tau-i)/a*100,2)}))})},itemsFiltered(){return this.isRelative?this.itemsRelative:this.items}},methods:{drawChart(t=!1){if(this.series&&!t||(this.series=_.map(this.itemsFiltered,(t,e)=>({name:this.hubArr[e],type:"scatter",itemStyle:{borderWidth:1,borderColor:"#fff"},data:_.map(t,t=>({name:`${this.hubArr[e]}->${t.ap}`,value:[this.distance(this.hubArr[e],t.ap),t.tau],symbolSize:12}))}))),!this.option||t){const t=this;this.option={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:11,fontWeight:"bold",color:"#FFFFFF"},xAxis:[{name:"Distance (mile)",nameLocation:"center",type:"value",scale:!0,nameGap:25,splitLine:{show:!1}}],yAxis:[{name:this.isRelative?"Volume (%)":"Volume (*1000)",nameGap:10,type:"value",scale:!0,splitLine:{show:!1},axisLabel:{formatter(e){return t.isRelative?e:_.round(e/1e3)}}}],grid:[{top:35,left:45,right:20,bottom:45}],tooltip:{trigger:"item",axisPointer:{type:"cross",label:{color:"#FFFFFF",backgroundColor:this.$vuetify.theme.primary,shadowBlur:0},crossStyle:{type:"dotted"}}},legend:{orient:"vertical",top:0,right:2,data:this.hubArr,itemGap:3,textStyle:{color:"#FFFFFF",selectedMode:"single",fontSize:12}},series:this.series}}this.chart.setOption(this.option,!0)},distance(t,e){if(t===e)return null;const i=_.find(this.airport,e=>e.code===t),a=_.find(this.airport,t=>t.code===e);return _.round(3958.76*d(p(i.lat)*p(a.lat)+u(i.lat)*u(a.lat)*u(i.lon-a.lon)),2)}},watch:{itemsFiltered(t){this.drawChart(!0)},large(t){_.delay(this.chart.resize,200)}},created(){},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsMapPaneConnectionScatter,"chalk"),this.drawChart(),window.addEventListener("resize",debounce(this.chart.resize,200))},1)},beforeDestroy(){window.removeEventListener("resize",debounce(this.chart.resize,200))}};function h(t){return t*Math.PI/180}function p(t){return Math.sin(h(t))}function u(t){return Math.cos(h(t))}function d(t){return Math.acos(t)}var m=c,v=i("2877"),f=Object(v["a"])(m,n,l,!1,null,null,null);f.options.__file="MapPaneConnectionScatter.vue";var b=f.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"echartsPaneConnectionDistribution",staticStyle:{width:"100%",height:"100%"}})},g=[],w={props:["isArrival","items"],data:()=>({chart:null,series:null,option:null}),computed:{...Object(s["c"])(["airport","color","hubArr"])},methods:{drawChart(t=!1){if(this.series&&!t||(this.series=_.map(this.items,(t,e)=>({name:this.hubArr[e],type:"line",symbolSize:8,lineStyle:{width:3,opacity:.6},data:_.map(t,(t,i)=>({name:this.isArrival?`${this.hubArr[e]}<-${t.ap}`:`${this.hubArr[e]}->${t.ap}`,value:t.tau}))}))),!this.option||t){const t=this;this.option={textStyle:{fontFamily:"Poppins, sans-serif",fontSize:11,fontWeight:"bold",color:"#FFFFFF"},xAxis:[{type:"category",scale:!0,splitLine:{show:!1},data:_.map(this.items[0],(t,e)=>e+1)}],yAxis:[{name:"Volume (*1000)",nameGap:10,type:"value",scale:!0,splitLine:{show:!1},axisLabel:{formatter(t){return _.round(t/1e3)}}}],grid:[{top:25,left:45,right:20,bottom:25}],tooltip:{trigger:"axis",formatter(e){let i=`Rank ${e[0].dataIndex+1}<br>`;return _.each(e,(e,a)=>{const r=e.marker.replace(e.color,t.color[a]);i+=`${r} ${e.name}: ${e.value}<br>`}),i.slice(0,-4)},axisPointer:{type:"shadow",label:{color:"#000000"}}},legend:{orient:"horizontal",width:250,top:0,right:5,data:this.hubArr,itemGap:3,itemWidth:15,textStyle:{color:"#FFFFFF",selectedMode:"single",fontSize:12}},series:this.series}}this.chart.setOption(this.option,!0)},distance(t,e){if(t===e)return null;const i=_.find(this.airport,e=>e.code===t),a=_.find(this.airport,t=>t.code===e);return _.round(3958.76*S(C(i.lat)*C(a.lat)+F(i.lat)*F(a.lat)*F(i.lon-a.lon)),2)}},watch:{items(t){this.drawChart(!0)}},created(){},mounted(){_.delay(()=>{this.chart=echarts.init(this.$refs.echartsPaneConnectionDistribution,"chalk"),this.drawChart(),window.addEventListener("resize",debounce(this.chart.resize,200))},1)},beforeDestroy(){window.removeEventListener("resize",debounce(this.chart.resize,200))}};function x(t){return t*Math.PI/180}function C(t){return Math.sin(x(t))}function F(t){return Math.cos(x(t))}function S(t){return Math.acos(t)}var A=w,z=Object(v["a"])(A,y,g,!1,null,null,null);z.options.__file="MapPaneConnectionDistribution.vue";var $=z.exports,k={data:()=>({isArrival:0,flight:["Departure","Arrival"],cut:10,map:!1,isRelative:!1,large:-1,slider:10,tooltipItems:[{title:"Departure",icon:"flight_takeoff"},{title:"Arrival",icon:"flight_land"}]}),computed:{...Object(s["c"])(["hubArr","dataHub"]),...Object(s["b"])(["hubArrFull"]),index(){return this.isArrival?"bndIn":"bndOt"},aps(){return _.filter(this.dataHub,t=>_.includes(this.hubArr,t.ap))},items(){return _.map(this.aps,(t,e)=>_.map(_.slice(t[this.index],0,this.slider),t=>({ap:t.ap,tau:10*t.tau,ratio:_.round(t.tau/this.aps[e].tau*100,2)})))}},methods:{isLarge(t){return this.large===t},largeStyle(t){return{height:this.isLarge(t)?"calc(100vh - 66px - 56px - 6px)":"calc(50vh - 66px - 2px)"}},setShow(t){return{display:-1===this.large||this.isLarge(t)?"":"none"}},getCenter(t){return{ap:t.ap,tau:t.tau}}},watch:{},created(){},mounted(){},components:{"app-map-pane":o["a"],"app-map-pane-connection-scatter":b,"app-map-pane-connection-distribution":$}},L=k,M=(i("9e94"),Object(v["a"])(L,a,r,!1,null,null,null));M.options.__file="_Connection.vue";e["default"]=M.exports},"9d86":function(t,e,i){},"9e94":function(t,e,i){"use strict";var a=i("9d86"),r=i.n(a);r.a}}]);